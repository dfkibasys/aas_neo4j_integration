input:
  meta:
    topic: submodel-events
    sourceUrl: "http://localhost:8081"
    registrationTime: 1730878783379
  event: 
    id: https://aas.example.org/sm/1
    type: SM_CREATED
    submodel: 
      id: https://aas.example.org/sm/1
      idShort: "1"
      kind: Instance
      submodelElements:
      - modelType: SubmodelElementCollection
        idShort: Col1
        value:
        - idShort: List1
          modelType: SubmodelElementList
          value:
          - modelType: Property
            value: P1
          - modelType: Property
            value: P2
          - modelType: SubmodelElementCollection
            value: 
            - modelType: Property
              idShort: P3
              value: P3
expected: | 
  statements:
  - statement: |
      MERGE (s:Submodel { id: $submodel.id }) 
      SET s:Identifiable:Referable:Submodel
      SET s.idShort = $submodel.idShort 
      SET s.sourceUrl = $submodel.sourceUrl 
      SET s.registrationTime = $submodel.registrationTime    
      MERGE (e0:SubmodelElement {smId: $submodel.id, idShortPath: $sme_0.idShortPath })
      SET e0:Referable:SubmodelElement:SubmodelElementCollection
      SET e0.idShort = $sme_0.idShort
      MERGE (e1:SubmodelElement {smId: $submodel.id, idShortPath: $sme_1.idShortPath })
      SET e1:Referable:SubmodelElement:SubmodelElementList
      SET e1.idShort = $sme_1.idShort
      MERGE (e2:SubmodelElement {smId: $submodel.id, idShortPath: $sme_2.idShortPath })
      SET e2:DataElement:Property:Referable:SubmodelElement
      SET e2.value = $sme_2.value
      MERGE (e3:SubmodelElement {smId: $submodel.id, idShortPath: $sme_3.idShortPath })
      SET e3:DataElement:Property:Referable:SubmodelElement
      SET e3.value = $sme_3.value
      MERGE (e4:SubmodelElement {smId: $submodel.id, idShortPath: $sme_4.idShortPath })
      SET e4:Referable:SubmodelElement:SubmodelElementCollection
      MERGE (e5:SubmodelElement {smId: $submodel.id, idShortPath: $sme_5.idShortPath })
      SET e5:DataElement:Property:Referable:SubmodelElement
      SET e5.idShort = $sme_5.idShort
      SET e5.value = $sme_5.value
      
      MERGE (s)-[:HAS_SUBMODEL_ELEMENT]->(e0)
      MERGE (e0)-[:HAS_CHILD]->(e1)
      MERGE (e1)-[:HAS_CHILD]->(e2)
      MERGE (e1)-[:HAS_CHILD]->(e3)
      MERGE (e1)-[:HAS_CHILD]->(e4)
      MERGE (e4)-[:HAS_CHILD]->(e5)
    parameters:
      submodel:
        id: "https://aas.example.org/sm/1"
        idShort: "1" 
        sourceUrl: "http://localhost:8081/submodels/aHR0cHM6Ly9hYXMuZXhhbXBsZS5vcmcvc20vMQ"  
        registrationTime: 1730878783379
      sme_0:  
        idShort: "Col1" 
        idShortPath: "Col1" 
      sme_1: 
        idShort: "List1" 
        idShortPath: "Col1.List1" 
      sme_2: 
        idShortPath: "Col1.List1[0]" 
        value: "P1"
      sme_3:
        idShortPath: "Col1.List1[1]"
        value: "P2" 
      sme_4: 
        idShortPath: "Col1.List1[2]" 
      sme_5:
        idShort: "P3"
        idShortPath: "Col1.List1[2].P3"
        value: "P3"